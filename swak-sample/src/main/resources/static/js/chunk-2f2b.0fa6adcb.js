(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f2b"],{"0978":function(e,t,a){},5794:function(e,t,a){"use strict";var s=a("b37a"),i=a.n(s);i.a},6598:function(e,t,a){"use strict";var s=a("e1d2"),i={get:function(e){return Object(s["a"])({url:"/api/manage/service/get/"+e,method:"get"})},list:function(){return Object(s["a"])({url:"/api/manage/service/list",method:"get"})},save:function(e){return Object(s["a"])({url:"/api/manage/service/save",method:"post",data:e})}};t["a"]=i},8620:function(e,t,a){},9826:function(e,t,a){"use strict";var s=a("0978"),i=a.n(s);i.a},"9c56":function(e,t,a){"use strict";var s=a("e1d2"),i={get:function(e){return Object(s["a"])({url:"/api/manage/subscribe/get/"+e,method:"get"})},page:function(e,t){return Object(s["a"])({url:"/api/manage/subscribe/page",method:"post",data:{subscribe:e,param:t}})},save:function(e){return Object(s["a"])({url:"/api/manage/subscribe/save",method:"post",data:e})},delete:function(e){return Object(s["a"])({url:"/api/manage/subscribe/delete",method:"post",data:e})},renewal:function(e){return Object(s["a"])({url:"/api/manage/subscribe/renewal",method:"post",data:e})}};t["a"]=i},a3df:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tax-page param-add"},[a("h4",[e._v("API订阅"),a("span",[e._v("/")]),e._v(e._s(this.subscribe.id?"修改":"添加")+"订阅")]),a("div",{staticClass:"content"},[a("el-form",{ref:"inputForm",attrs:{model:e.subscribe,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"订阅用户",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请选择订阅用户"},model:{value:e.subscribe.userName,callback:function(t){e.$set(e.subscribe,"userName",t)},expression:"subscribe.userName"}},[a("template",{slot:"append"},[a("el-button",{on:{click:e.doSelectUser}},[e._v("选择")])],1)],2),a("div",{staticClass:"form-tip"},[e._v("请选择要订阅的用户.")])],1),a("el-form-item",{attrs:{label:"订阅服务",prop:"apiName"}},[a("el-input",{attrs:{placeholder:"请选择订阅服务"},model:{value:e.subscribe.apiName,callback:function(t){e.$set(e.subscribe,"apiName",t)},expression:"subscribe.apiName"}},[a("template",{slot:"append"},[a("el-button",{on:{click:e.doSelectApi}},[e._v("选择")])],1)],2),a("div",{staticClass:"form-tip"},[e._v("请选择要订阅的服务.")])],1),a("el-form-item",{attrs:{label:"开始时间",prop:"beginDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请设置开始时间"},model:{value:e.subscribe.beginDate,callback:function(t){e.$set(e.subscribe,"beginDate",t)},expression:"subscribe.beginDate"}}),a("div",{staticClass:"form-tip"},[e._v("设置订阅的开始时间，不填写则自动设置为当天.")])],1),a("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请设置结束时间"},model:{value:e.subscribe.endDate,callback:function(t){e.$set(e.subscribe,"endDate",t)},expression:"subscribe.endDate"}}),a("div",{staticClass:"form-tip"},[e._v("设置订阅的结束时间，到期之后不能继续使用服务 .")])],1),a("el-form-item",{attrs:{label:"支付状态",prop:"payState"}},[a("el-radio",{attrs:{label:"UN_PAY"},model:{value:e.subscribe.payState,callback:function(t){e.$set(e.subscribe,"payState",t)},expression:"subscribe.payState"}},[e._v("未支付")]),a("el-radio",{attrs:{label:"PAYED"},model:{value:e.subscribe.payState,callback:function(t){e.$set(e.subscribe,"payState",t)},expression:"subscribe.payState"}},[e._v("已支付")]),a("el-radio",{attrs:{label:"FREE"},model:{value:e.subscribe.payState,callback:function(t){e.$set(e.subscribe,"payState",t)},expression:"subscribe.payState"}},[e._v("免费")]),a("div",{staticClass:"form-tip"},[e._v("设置支付状态.")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),a("swak-link",{staticClass:"el-button",attrs:{to:"/system/subs"}},[e._v("返回")])],1)],1)],1),a("user-table",{attrs:{visible:e.userSelectable},on:{"update:visible":function(t){e.userSelectable=t},"select:user":e.userSelected}}),a("apis-table",{attrs:{visible:e.apiSelectable},on:{"update:visible":function(t){e.apiSelectable=t},"select:api":e.apiSelected}})],1)},i=[],n=(a("7f7f"),a("a481"),a("cadf"),a("551c"),a("097d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-table-select"},[a("el-dialog",{attrs:{title:"选择用户",visible:e.visible,"before-close":e.doCancel},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{attrs:{inline:!0,model:e.query}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.doQuery}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"usersGrid",attrs:{data:e.users,border:"","highlight-current-row":""},on:{"current-change":e.doSelect}},[a("el-table-column",{attrs:{property:"name",label:"用户名称"}}),a("el-table-column",{attrs:{property:"type",label:"用户类型"}}),a("el-table-column",{attrs:{property:"createDate",label:"注册日期"}})],1),a("nav",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"pager",total:this.param.recordCount,"page-size":this.param.pageSize},on:{"current-change":e.changePage}})],1)],1)],1)}),r=[],l=a("b2c0"),c={name:"user-table",data:function(){return{loading:!0,query:{},users:[],param:{}}},props:{visible:{type:Boolean,default:!1}},mounted:function(){this.page(1)},methods:{page:function(e){var t=this;this.loading=!0,this.param.pageIndex=e,l["a"].page(this.query,this.param).then(function(e){t.users=e.obj.data,t.param=e.obj.param,t.loading=!1})},doCancel:function(){this.$emit("update:visible",!1)},doQuery:function(){this.page(1)},doSelect:function(e){this.$emit("select:user",e),this.$emit("update:visible",!1)},changePage:function(){}}},o=c,u=(a("5794"),a("2877")),b=Object(u["a"])(o,n,r,!1,null,"4fdd2ff2",null);b.options.__file="userTable.vue";var p=b.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-table-select"},[a("el-dialog",{attrs:{title:"选择Api",visible:e.visible,"before-close":e.doCancel},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"apis"},e._l(e.apis,function(t,s){return a("a",{key:t.id,staticClass:"api",on:{click:function(t){t.stopPropagation(),e.doSelect(s)}}},[a("div",{staticClass:"-icon"},[e._v(e._s(t.storeName))]),a("div",{staticClass:"-info"},[a("div",{staticClass:"-ops"},[a("span",{staticClass:"-name"},[e._v(e._s(t.name))]),a("span",{staticClass:"-price"},[a("span",{staticClass:"-p1"},[e._v("￥")]),a("span",{staticClass:"-p2"},[e._v(e._s(t.price))]),a("span",{staticClass:"-p3"},[e._v("/年")])])]),a("div",{staticClass:"-desc"},[e._v(e._s(t.descs))])])])}))])],1)},m=[],f=a("6598"),v={name:"apis-table",data:function(){return{apis:[]}},props:{visible:{type:Boolean,default:!1}},mounted:function(){this.loadApis()},methods:{loadApis:function(){var e=this;f["a"].list().then(function(t){e.apis=t.obj||[]})},doCancel:function(){this.$emit("update:visible",!1)},doSelect:function(e){var t=this.apis[e];this.$emit("select:api",t),this.$emit("update:visible",!1)}}},h=v,g=(a("9826"),Object(u["a"])(h,d,m,!1,null,"41b81ec2",null));g.options.__file="apiTable.vue";var _=g.exports,y=a("9c56"),S={components:{ApisTable:_,UserTable:p},name:"subs-save",data:function(){return{subscribe:{},userSelectable:!1,apiSelectable:!1}},mounted:function(){this.$emit("layout:load","subs");var e=this.$route.params.id;this.loadSub(e)},methods:{loadSub:function(e){var t=this;e&&y["a"].get(e).then(function(e){t.subscribe=e.obj||{}})},onSubmit:function(){var e=this;this.$refs["inputForm"].validate(function(t){t&&e.subscribe.userId&&e.subscribe.apiId?y["a"].save(e.subscribe).then(function(t){e.$notify.success("保存订阅成功!"),e.$router.replace("/system/subs")}):e.$notify.error("表单错误，请输入必填项目")})},doSelectUser:function(){this.userSelectable=!0},userSelected:function(e){e&&(this.subscribe.userId=e.id,this.subscribe.userName=e.name)},doSelectApi:function(){this.apiSelectable=!0},apiSelected:function(e){e&&(this.subscribe.apiId=e.id,this.subscribe.apiName=e.name)}}},C=S,$=(a("eee2"),Object(u["a"])(C,s,i,!1,null,"784c96a0",null));$.options.__file="subsSave.vue";t["default"]=$.exports},b2c0:function(e,t,a){"use strict";var s=a("e1d2"),i={page:function(e,t){return Object(s["a"])({url:"/api/manage/app/page",method:"post",data:{user:e,param:t}})},managers:function(e){return Object(s["a"])({url:"/api/manage/app/managers/"+e,method:"get"})}};t["a"]=i},b37a:function(e,t,a){},eee2:function(e,t,a){"use strict";var s=a("8620"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-2f2b.0fa6adcb.js.map