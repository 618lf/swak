{"version":3,"sources":["webpack:///./src/views/register/depart.vue?fe3e","webpack:///src/views/register/depart.vue","webpack:///./src/views/register/depart.vue?b347","webpack:///./src/views/register/depart.vue","webpack:///./src/views/register/depart.vue?cb34"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","manager","rules","label-width","label","prop","placeholder","value","callback","$$v","$set","expression","class","openId","on","click","$event","stopPropagation","doMock","src","qrcode","headimg","_s","name","substring","loading","type","disabled","disable","doReqister","staticRenderFns","departvue_type_script_lang_js_","data","userName","token","timer","mounted","clearTimeout","loadQrcode","computed","checked","methods","_this","reqister","then","res","obj","touchTask","_this2","setTimeout","doTouch","_this3","touch","success","doRender","user","_this4","$store","dispatch","$router","replace","$alert","msg","confirmButtonText","$notify","error","destroyed","register_departvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_depart_vue_vue_type_style_index_0_id_62d679f6_lang_stylus_rel_stylesheet_2Fstylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-2507.b12df302.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-content\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"注册单位帐号\")]),_c('div',{staticClass:\"register-form\"},[_c('el-form',{ref:\"inputForm\",attrs:{\"model\":_vm.manager,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"帐号名称\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入帐号名称\"},model:{value:(_vm.manager.userName),callback:function ($$v) {_vm.$set(_vm.manager, \"userName\", $$v)},expression:\"manager.userName\"}}),_c('div',{staticClass:\"form-tip\"},[_vm._v(\"可以输入单位名称，支持中文.\")])],1),_c('el-form-item',{attrs:{\"label\":\"帐号管理员\",\"prop\":\"openId\"}},[_c('div',{staticClass:\"manager\",class:this.manager.openId?'scaned':''},[_c('a',{staticClass:\"qrcode\",on:{\"click\":function($event){$event.stopPropagation();return _vm.doMock($event)}}},[_c('img',{attrs:{\"src\":this.qrcode}})]),_c('div',{staticClass:\"user\"},[(_vm.manager.headimg)?_c('div',{staticClass:\"headimg\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":_vm.manager.headimg}})]):(_vm.manager.name)?_c('div',{staticClass:\"headimg\"},[_c('span',{staticClass:\"image\"},[_vm._v(_vm._s(_vm.manager.name.substring(0, 1)))])]):_c('div',{staticClass:\"headimg\"},[_c('span',{staticClass:\"image\"})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.manager.name))])])]),_c('div',{staticClass:\"form-tip\"},[_vm._v(\"用微信扫描二维码，将成为单位帐号的管理员，拥有单位管理的相关权限\")])]),_c('el-form-item',{attrs:{\"prop\":\"checked\"}},[_c('el-checkbox',{model:{value:(_vm.manager.checked),callback:function ($$v) {_vm.$set(_vm.manager, \"checked\", $$v)},expression:\"manager.checked\"}},[_vm._v(\"我同意并遵守《税务公社服务协议》\")])],1)],1)],1),_c('div',{staticClass:\"-btn\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"success\",\"disabled\":_vm.disable},on:{\"click\":_vm.doReqister}},[_vm._v(\"注册\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-content\">\n    <div class=\"title\">注册单位帐号</div>\n    <div class=\"register-form\">\n      <el-form ref=\"inputForm\" :model=\"manager\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"帐号名称\" prop=\"userName\">\n          <el-input v-model=\"manager.userName\" placeholder=\"请输入帐号名称\"></el-input>\n          <div class=\"form-tip\">可以输入单位名称，支持中文.</div>\n        </el-form-item>\n        <el-form-item label=\"帐号管理员\" prop=\"openId\">\n          <div class=\"manager\" :class=\"this.manager.openId?'scaned':''\">\n            <a class=\"qrcode\" @click.stop=\"doMock\"><img :src=\"this.qrcode\"/></a>\n            <div class=\"user\">\n              <div class=\"headimg\" v-if=\"manager.headimg\">\n                <img class=\"image\" :src=\"manager.headimg\"/>\n              </div>\n              <div class=\"headimg\" v-else-if=\"manager.name\">\n                <span class=\"image\">{{manager.name.substring(0, 1)}}</span>\n              </div>\n              <div class=\"headimg\" v-else>\n                <span class=\"image\"></span>\n              </div>\n              <div class=\"name\">{{manager.name}}</div>\n            </div>\n          </div>\n          <div class=\"form-tip\">用微信扫描二维码，将成为单位帐号的管理员，拥有单位管理的相关权限</div>\n        </el-form-item>\n        <el-form-item prop=\"checked\">\n          <el-checkbox v-model=\"manager.checked\">我同意并遵守《税务公社服务协议》</el-checkbox>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"-btn\">\n      <el-button :loading=\"loading\" type=\"success\" :disabled=\"disable\" @click=\"doReqister\">注册</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import ReqisterApi from '@/api/user/reqister';\n\n  export default {\n    name: \"department\",\n    data() {\n      return {\n        manager: {\n          openId : '',\n          userName:'',\n          type: 1,\n          headimg:'',\n          name:''\n        },\n        token: '',\n        qrcode: '',\n        timer: null,\n        loading: false,\n      }\n    },\n    mounted() {\n      if (this.timer != null) {\n        clearTimeout(this.timer);\n      }\n      this.loadQrcode();\n    },\n    computed: {\n      disable: function () {\n        return !this.manager.checked;\n      }\n    },\n    methods: {\n      loadQrcode: function () {\n        ReqisterApi.qrcode().then(res => {\n          this.token = res.obj.token;\n          this.qrcode = res.obj.qrcode;\n          this.touchTask();\n        });\n      },\n      touchTask: function () {\n        if (this.timer != null) {\n          clearTimeout(this.timer);\n        }\n        this.timer = setTimeout(() => {\n          this.doTouch();\n        }, 1000);\n      },\n      doTouch: function () {\n        ReqisterApi.touch(this.token).then(res => {\n          if (res.success) {\n            this.doRender(res.obj);\n          } else {\n            this.touchTask();\n          }\n        })\n      },\n      doRender: function (user) {\n        if (this.timer != null) {\n          clearTimeout(this.timer);\n        }\n        this.manager.openId = user.openId;\n        this.manager.name = user.name;\n        this.manager.headimg = user.headimg;\n      },\n      doReqister: function () {\n        // checked\n        if (!!this.manager.openId && !!this.manager.userName) {\n          if (this.timer != null) {\n            clearTimeout(this.timer);\n          }\n          this.loading = true;\n          this.$store.dispatch('Reqister', {manager: this.manager, token: this.token}).then(res => {\n            this.loading = false;\n            if (res.success) {\n              this.$router.replace(\"/\")\n            } else {\n              this.$alert(res.msg, '注册失败', {\n                confirmButtonText: '确定'\n              });\n            }\n          })\n        } else {\n          this.$notify.error(\"请填写帐号名称，并用微信扫描二维码\");\n        }\n      },\n      doMock: function () {\n        ReqisterApi.doMock(this.token).then(res => {\n        })\n      }\n    },\n    destroyed: function () {\n      if (this.timer != null) {\n        clearTimeout(this.timer);\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" scoped>\n  @require \"../../ui/common/stylus/variable.styl\"\n  .main-content {\n    background-color $color-white;\n    padding 40px;\n    min-height 600px;\n    .title {\n      text-align center;\n      padding 20px;\n      color $color-font-xx;\n    }\n    .register-form {\n      width 560px;\n      margin 0 auto;\n      border 1px solid #ddd;\n      padding 40px;\n    }\n    .form-control-tip {\n      color $color-font-xx;\n      font-size $fontsize-small-s;\n      padding 5px 0;\n    }\n    .manager {\n      border: 1px solid #ddd;\n      display flex;\n      .qrcode {\n        width 200px;\n        min-height 200px;\n        display block;\n        img {\n          display block;\n        }\n      }\n      .user {\n        flex: 1;\n        padding 10px;\n        font-size $fontsize-medium;\n        color $color-font-x;\n        padding-top 40px;\n        .headimg {\n          .image {\n            display block;\n            width 70px;\n            height 70px;\n            border-radius 50%;\n            margin 0 auto;\n          }\n        }\n        .name {\n          text-align center;\n          margin-top 20px;\n        }\n      }\n    }\n    .-btn {\n      text-align center;\n      margin 20px;\n      color $color-white;\n    }\n  }\n  \n  .manager.scaned {\n    .qrcode {\n      position relative;\n      &:before {\n        content \"\";\n        display block;\n        position absolute;\n        width 100%;\n        height 100%;\n        top 0;\n        text-align center;\n        background-color $color-light-grey;\n        opacity .7;\n      }\n      &:after {\n        content \"已扫描\";\n        display block;\n        position absolute;\n        width 100px;\n        top 50%;\n        left 50%;\n        margin-left -50px;\n        text-align center;\n        margin-top -20px;\n        font-size 18px;\n      }\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./depart.vue?vue&type=template&id=62d679f6&scoped=true&\"\nimport script from \"./depart.vue?vue&type=script&lang=js&\"\nexport * from \"./depart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./depart.vue?vue&type=style&index=0&id=62d679f6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62d679f6\",\n  null\n  \n)\n\ncomponent.options.__file = \"depart.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depart.vue?vue&type=style&index=0&id=62d679f6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depart.vue?vue&type=style&index=0&id=62d679f6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\""],"sourceRoot":""}