{"version":3,"sources":["webpack:///./src/views/register/person.vue?6fb3","webpack:///./src/views/register/person.vue?c7e8","webpack:///src/views/register/person.vue","webpack:///./src/views/register/person.vue?09c8","webpack:///./src/views/register/person.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_person_vue_vue_type_style_index_0_id_7cf73442_lang_stylus_rel_stylesheet_2Fstylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","manager","rules","label-width","label","prop","class","openId","on","click","$event","stopPropagation","doMock","src","qrcode","headimg","_s","name","substring","value","callback","$$v","$set","expression","loading","type","disabled","disable","doReqister","staticRenderFns","personvue_type_script_lang_js_","data","userName","token","timer","mounted","clearTimeout","loadQrcode","computed","checked","methods","_this","reqister","then","res","obj","touchTask","_this2","setTimeout","doTouch","_this3","touch","success","doRender","user","_this4","$store","dispatch","$router","replace","$alert","msg","confirmButtonText","$notify","error","destroyed","register_personvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-3a6f.00d1aca8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./person.vue?vue&type=style&index=0&id=7cf73442&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./person.vue?vue&type=style&index=0&id=7cf73442&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-content\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"注册个人帐号\")]),_c('div',{staticClass:\"register-form\"},[_c('el-form',{ref:\"inputForm\",attrs:{\"model\":_vm.manager,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"微信帐号\",\"prop\":\"openId\"}},[_c('div',{staticClass:\"manager\",class:this.manager.openId?'scaned':''},[_c('a',{staticClass:\"qrcode\",on:{\"click\":function($event){$event.stopPropagation();return _vm.doMock($event)}}},[_c('img',{attrs:{\"src\":this.qrcode}})]),_c('div',{staticClass:\"user\"},[(_vm.manager.headimg)?_c('div',{staticClass:\"headimg\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":_vm.manager.headimg}})]):(_vm.manager.name)?_c('div',{staticClass:\"headimg\"},[_c('span',{staticClass:\"image\"},[_vm._v(_vm._s(_vm.manager.name.substring(0, 1)))])]):_c('div',{staticClass:\"headimg\"},[_c('span',{staticClass:\"image\"})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.manager.name))])])]),_c('div',{staticClass:\"form-tip\"},[_vm._v(\"用微信扫描二维码\")])]),_c('el-form-item',{attrs:{\"prop\":\"checked\"}},[_c('el-checkbox',{model:{value:(_vm.manager.checked),callback:function ($$v) {_vm.$set(_vm.manager, \"checked\", $$v)},expression:\"manager.checked\"}},[_vm._v(\"我同意并遵守《税务公社服务协议》\")])],1)],1)],1),_c('div',{staticClass:\"-btn\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"success\",\"disabled\":_vm.disable},on:{\"click\":_vm.doReqister}},[_vm._v(\"注册\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-content\">\n    <div class=\"title\">注册个人帐号</div>\n    <div class=\"register-form\">\n      <el-form ref=\"inputForm\" :model=\"manager\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"微信帐号\" prop=\"openId\">\n          <div class=\"manager\" :class=\"this.manager.openId?'scaned':''\">\n            <a class=\"qrcode\" @click.stop=\"doMock\"><img :src=\"this.qrcode\"/></a>\n            <div class=\"user\">\n              <div class=\"headimg\" v-if=\"manager.headimg\">\n                <img class=\"image\" :src=\"manager.headimg\"/>\n              </div>\n              <div class=\"headimg\" v-else-if=\"manager.name\">\n                <span class=\"image\">{{manager.name.substring(0, 1)}}</span>\n              </div>\n              <div class=\"headimg\" v-else>\n                <span class=\"image\"></span>\n              </div>\n              <div class=\"name\">{{manager.name}}</div>\n            </div>\n          </div>\n          <div class=\"form-tip\">用微信扫描二维码</div>\n        </el-form-item>\n        <el-form-item prop=\"checked\">\n          <el-checkbox v-model=\"manager.checked\">我同意并遵守《税务公社服务协议》</el-checkbox>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"-btn\">\n      <el-button :loading=\"loading\" type=\"success\" :disabled=\"disable\" @click=\"doReqister\">注册</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import ReqisterApi from '@/api/user/reqister';\n\n  export default {\n    name: \"persion\",\n    data() {\n      return {\n        manager: {\n          openId: '',\n          type: 2,\n          headimg: '',\n          name: '',\n          userName: ''\n        },\n        token: '',\n        qrcode: '',\n        timer: null,\n        loading: false,\n      }\n    },\n    mounted() {\n      if (this.timer != null) {\n        clearTimeout(this.timer);\n      }\n      this.loadQrcode();\n    },\n    computed: {\n      disable: function () {\n        return !this.manager.checked;\n      }\n    },\n    methods: {\n      loadQrcode: function () {\n        ReqisterApi.qrcode().then(res => {\n          this.token = res.obj.token;\n          this.qrcode = res.obj.qrcode;\n          this.touchTask();\n        });\n      },\n      touchTask: function () {\n        if (this.timer != null) {\n          clearTimeout(this.timer);\n        }\n        this.timer = setTimeout(() => {\n          this.doTouch();\n        }, 1000);\n      },\n      doTouch: function () {\n        ReqisterApi.touch(this.token).then(res => {\n          if (res.success) {\n            this.doRender(res.obj);\n          } else {\n            this.touchTask();\n          }\n        })\n      },\n      doRender: function (user) {\n        if (this.timer != null) {\n          clearTimeout(this.timer);\n        }\n        this.manager.openId = user.openId;\n        this.manager.name = user.name;\n        this.manager.userName = user.name;\n        this.manager.headimg = user.headimg;\n      },\n      doReqister: function () {\n        // checked\n        if (!!this.manager.openId) {\n          if (this.timer != null) {\n            clearTimeout(this.timer);\n          }\n          this.loading = true;\n          this.$store.dispatch('Reqister', {manager: this.manager, token: this.token}).then(res => {\n            this.loading = false;\n            if (res.success) {\n              this.$router.replace(\"/\")\n            } else {\n              this.$alert(res.msg, '注册失败', {\n                confirmButtonText: '确定'\n              });\n            }\n          })\n        } else {\n          this.$notify.error(\"请用微信扫描二维码\");\n        }\n      },\n      doMock: function () {\n        ReqisterApi.doMock(this.token).then(res => {\n        })\n      }\n    },\n    destroyed: function () {\n      if (this.timer != null) {\n        clearTimeout(this.timer);\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" scoped>\n  @require \"../../ui/common/stylus/variable.styl\"\n  .main-content {\n    background-color $color-white;\n    padding 40px;\n    min-height 600px;\n    .title {\n      text-align center;\n      padding 20px;\n      color $color-font-xx;\n    }\n    .register-form {\n      width 560px;\n      margin 0 auto;\n      border 1px solid #ddd;\n      padding 40px;\n    }\n    .form-control-tip {\n      color $color-font-xx;\n      font-size $fontsize-small-s;\n      padding 5px 0;\n    }\n    .manager {\n      border: 1px solid #ddd;\n      display flex;\n      .qrcode {\n        width 200px;\n        min-height 200px;\n        display block;\n        img {\n          display block;\n        }\n      }\n      .user {\n        flex: 1;\n        padding 10px;\n        font-size $fontsize-medium;\n        color $color-font-x;\n        padding-top 40px;\n        .headimg {\n          .image {\n            display block;\n            width 70px;\n            height 70px;\n            border-radius 50%;\n            margin 0 auto;\n          }\n        }\n        .name {\n          text-align center;\n          margin-top 20px;\n        }\n      }\n    }\n    .-btn {\n      text-align center;\n      margin 20px;\n      color $color-white;\n    }\n  }\n  \n  .manager.scaned {\n    .qrcode {\n      position relative;\n      &:before {\n        content \"\";\n        display block;\n        position absolute;\n        width 100%;\n        height 100%;\n        top 0;\n        text-align center;\n        background-color $color-light-grey;\n        opacity .7;\n      }\n      &:after {\n        content \"已扫描\";\n        display block;\n        position absolute;\n        width 100px;\n        top 50%;\n        left 50%;\n        margin-left -50px;\n        text-align center;\n        margin-top -20px;\n        font-size 18px;\n      }\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./person.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./person.vue?vue&type=template&id=7cf73442&scoped=true&\"\nimport script from \"./person.vue?vue&type=script&lang=js&\"\nexport * from \"./person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./person.vue?vue&type=style&index=0&id=7cf73442&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7cf73442\",\n  null\n  \n)\n\ncomponent.options.__file = \"person.vue\"\nexport default component.exports"],"sourceRoot":""}